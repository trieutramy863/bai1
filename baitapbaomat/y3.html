<!doctype html>
<html><head><meta charset="utf-8"><title>Columnar Transposition</title></head>
<body style="font-family:Arial;max-width:700px;margin:20px">
<h3>Columnar Transposition</h3>
<textarea id="pt" style="width:100%;height:100px"></textarea>
<label>Key (permutation indices separated by spaces, 0-based): <input id="key" value="2 0 1" style="width:90%"></label>
<button onclick="enc()">Encrypt</button> <button onclick="dec()">Decrypt</button>
<textarea id="out" style="width:100%;height:100px" readonly></textarea>
<script>
function parseKey(s){ return s.trim().split(/\s+/).map(x=>parseInt(x,10)); }
function encrypt(pt,key){
  const n=key.length;
  const rows=Math.ceil(pt.length/n);
  const mat=Array.from({length:rows},()=>Array(n).fill('X'));
  let k=0;
  for(let r=0;r<rows;r++) for(let c=0;c<n;c++) if(k<pt.length) mat[r][c]=pt[k++];
  let ct='';
  for(let p=0;p<n;p++){
    const col = key[p];
    for(let r=0;r<rows;r++) ct+=mat[r][col];
  }
  return ct;
}
function decrypt(ct,key){
  const n=key.length;
  const rows=Math.ceil(ct.length/n);
  const mat=Array.from({length:rows},()=>Array(n).fill('?'));
  let k=0;
  for(let p=0;p<n;p++){
    const col=key[p];
    for(let r=0;r<rows && k<ct.length;r++) mat[r][col]=ct[k++];
  }
  let pt='';
  for(let r=0;r<rows;r++) for(let c=0;c<n;c++) if(mat[r][c] && mat[r][c] !== '?') pt+=mat[r][c];
  return pt;
}
function enc(){ document.getElementById('out').value = encrypt(document.getElementById('pt').value, parseKey(document.getElementById('key').value));}
function dec(){ document.getElementById('out').value = decrypt(document.getElementById('pt').value, parseKey(document.getElementById('key').value));}
</script>
</body></html>
